children:

  kernel: {}
  sessions: {}
  simulation: {}

  network:
    children:
      populations: {}
      neuron_models:
        children:
          ht_neuron:
            nest_model: ht_neuron
            params:
              g_peak_NaP: 0.5
              g_peak_KNa: 0.5
              g_KL: 1.0
              E_rev_NaP: 55.0
              g_peak_AMPA: 0.1
              g_peak_h: 0.0
              g_peak_T: 0.0
              g_peak_NMDA: 0.015
              g_peak_GABA_A: 0.33
              g_peak_GABA_B: 0.0132
              instant_unblock_NMDA: true        # old NEST defaults
              S_act_NMDA: 0.4                   # old NEST defaults
              V_act_NMDA: !!python/float -58.0  # old NEST defaults
            children:
              cortical_excitatory:
                params:
                  theta_eq: !!python/float -51.0
                  tau_theta: 2.0
                  tau_spike: 1.75
                  tau_m: 16.0
                  t_ref: 2.0
                children: # Neuron models
                  Vp_exc:
                    name: Vp_exc
                    params: {}
              cortical_inhibitory:
                params:
                  theta_eq: !!python/float -53.0
                  tau_theta: 1.0
                  tau_spike: 0.5
                  tau_m: 8.0
                  t_ref: 1.0
                children: # Neuron models
                  Vp_inh:
                    name: Vp_inh
                    params: {}
              thalamic:
                params:
                  g_peak_h: 1.0
                  g_peak_T: 1.0
                  g_peak_KNa: 0.0
                  theta_eq: !!python/float -53.0
                  tau_theta: 0.75
                  tau_spike: 0.75
                  tau_m: 8.0
                  E_rev_GABA_A: !!python/float -70
                  t_ref: 1.0
                children:
                  Tp_exc:
                    name: Tp_exc
                    params: {}
                  Tp_inh:
                    name: Tp_inh
                    params: {}
              reticular:
                name: Rp
                params:
                  theta_eq: !!python/float -53.0
                  tau_theta: 0.75
                  tau_spike: 0.75
                  tau_m: 8.0
                  g_peak_KNa: 0.0
                  E_rev_GABA_A: -80.0
                  g_peak_T: 1.0
                  g_peak_h: 1.0
                  t_ref: 1.0
          spike_generator:
            nest_model: spike_generator
            params: {}
            children:  # Neuron models
              input_exc:
                name: input_exc
                params: {}


      synapse_models:
        children:
          ht_synapse:
            nest_model: ht_synapse
            params:
              tau_P: 50.
              delta_P: 0.2
              target_neuron: ht_neuron
            children: # synapse models
              AMPA_syn:
                name: AMPA_syn
                params:
                  receptor_type: AMPA
              NMDA_syn:
                name: NMDA_syn
                params:
                  receptor_type: NMDA
              GABA_A_syn:
                name: GABA_A_syn
                params:
                  receptor_type: GABA_A
              GABA_B_syn:
                name: GABA_B_syn
                params:
                  receptor_type: GABA_B
          static_synapse:
            nest_model: static_synapse
            params: {}
            children: # synapse models
              input_synapse:
                name: reticular_projection
                params:
                  target_neuron: ht_neuron
                  receptor_type: AMPA

      layers:
        params:
          max_input_rate: 200 # Input image can be 0.5 (noise) -> half on retina
          edge_wrap: true
          visSize: 8.0
          exc_inh_ratio: 1
          weight_gain: 0.6666666666666666
          rf_scale_factor: 1.
          maskfactor: 1.
          input_area_name: input_area
          scale_input_weights: true
          nrows: 40
          ncols: 40
          scale_kernels_masks: true
          with_parrot: False
        children: # areas
          input_area:
            params:
              area: input_area
              with_parrot: True
              filters:
                dimensions:
                  spatial_frequencies: 1
                  orientations: 1
                  signs: 1
                suffixes:
                  spatial_frequencies: sf
                  orientations: o
                  signs: s
            children: # layers
              retina:
                name: retina
                params:
                  elements:
                    - population: input_exc
                      type: excitatory
                      ratio: 1
          thalamus:
            params:
              area: thalamus
            children:
              Tp_layer:
                name: Tp_layer
                params:
                  elements:
                    - population: Tp_exc
                      type: excitatory
                      ratio: 1
                    - population: Tp_inh
                      type: inhibitory
                      ratio: 1
          reticula:
            params:
              area: reticula
            children:
              Rp_layer:
                name: Rp_layer
                params:
                  elements:
                    - population: Rp
                      type: excitatory
                      ratio: 1
          Vp:
            params:
              area: Vp
            children:
              Vp_L23_vertical:
                name: Vp_L23_vertical
                params:
                  elements:
                    - population: Vp_exc
                      type: excitatory
                      ratio: 2
                    - population: Vp_inh
                      type: inhibitory
                      ratio: 1
              Vp_L23_horizontal:
                name: Vp_L23_horizontal
                params:
                  elements:
                    - population: Vp_exc
                      type: excitatory
                      ratio: 2
                    - population: Vp_inh
                      type: inhibitory
                      ratio: 1
              Vp_L4_vertical:
                name: Vp_L4_vertical
                params:
                  elements:
                    - population: Vp_exc
                      type: excitatory
                      ratio: 2
                    - population: Vp_inh
                      type: inhibitory
                      ratio: 1
              Vp_L4_horizontal:
                name: Vp_L4_horizontal
                params:
                  elements:
                    - population: Vp_exc
                      type: excitatory
                      ratio: 2
                    - population: Vp_inh
                      type: inhibitory
                      ratio: 1
              Vp_L56_vertical:
                name: Vp_L56_vertical
                params:
                  elements:
                    - population: Vp_exc
                      type: excitatory
                      ratio: 2
                    - population: Vp_inh
                      type: inhibitory
                      ratio: 1
              Vp_L56_horizontal:
                name: Vp_L56_horizontal
                params:
                  elements:
                    - population: Vp_exc
                      type: excitatory
                      ratio: 2
                    - population: Vp_inh
                      type: inhibitory
                      ratio: 1

      connection_models:
        params:
          allow_autapses: false
          allow_multapses: false
          allow_oversized_mask: true
          delays:
              uniform:
                  min: 1.75
                  max: 2.25
          connection_type: divergent
        children:
          intralaminar_exc:
              params:
                weights: 1.
                mask:
                  circular:
                    radius: 12.
                kernel:
                  gaussian:
                    p_center: 0.05
                    sigma: 7.5
              children:
                intralaminar_NMDA:
                  name: intralaminar_NMDA
                  params:
                    synapse_model: NMDA_syn
                intralaminar_AMPA:
                  name: intralaminar_AMPA
                  params:
                    synapse_model: AMPA_syn
                intralaminar_AMPA_L4:
                  name: intralaminar_AMPA_L4
                  params:
                    synapse_model: AMPA_syn
                    mask:
                      circular:
                        radius: 7.
          interlaminar_exc:
              params:
                mask:
                  circular:
                    radius: 2.0
                kernel:
                  gaussian:
                    p_center: 1.0
                    sigma: 7.5
              children:
                interlaminar_NMDA:
                    name: interlaminar_NMDA
                    params:
                      synapse_model: NMDA_syn
                      weights: 1.0
                interlaminar_AMPA_L23_to_L56:
                    name: interlaminar_AMPA_L23_to_L56
                    params:
                      synapse_model: AMPA_syn
                      weights: 1.0
                interlaminar_AMPA_Vp:
                    name: interlaminar_AMPA_Vp
                    params:
                      synapse_model: AMPA_syn
                      weights: 2.0

          intralaminar_GABA_A:
            params:
              synapse_model: GABA_A_syn
              weights: 1.0
              mask:
                circular:
                  radius: 7.0
              kernel:
                gaussian:
                  p_center: 0.25
                  sigma: 7.5
            children:
              intralaminar_GABA_A_to_exc:
                name: intralaminar_GABA_A_to_exc
                params: {}
              intralaminar_GABA_A_to_inh_cc:
                name: intralaminar_GABA_A_to_inh_cc
                params:
                  weights: 0.5
              intralaminar_GABA_A_to_inh_cx:
                name: intralaminar_GABA_A_to_inh_cx
                params:
                  weights: 0.75

          interlaminar_GABA_B:
            name: interlaminar_GABA_B
            params:
              synapse_model: GABA_B_syn
              weights: 1.0
              mask:
                circular:
                  radius: 2.0
              kernel: 0.3

          intra-thalamic:
            params: {}
            children:
              T_R_AMPA:
                name: T_R_AMPA
                params:
                  synapse_model: AMPA_syn
                  weights: 2.0
                  mask:
                    circular:
                      radius: 2.0
                  kernel:
                    gaussian:
                      p_center: 1.0
                      sigma: 7.5
              T_T_GABA_A:
                name: T_T_GABA_A
                params:
                  synapse_model: GABA_A_syn
                  weights: 1.0
                  mask:
                    circular:
                      radius: 2.0
                  kernel:
                    gaussian:
                      p_center: 0.25
                      sigma: 7.5
              R_T_GABA_A:
                name: R_T_GABA_A
                params:
                  synapse_model: GABA_A_syn
                  weights: 1.0
                  mask:
                    circular:
                      radius: 12.0
                  kernel:
                    gaussian:
                      p_center: 0.15
                      sigma: 7.5
              R_T_GABA_B:
                name: R_T_GABA_B
                params:
                  synapse_model: GABA_B_syn
                  weights: 1.0
                  mask:
                    circular:
                      radius: 12.0
                  kernel:
                    gaussian:
                      p_center: 0.05
                      sigma: 7.5

              R_R_GABA_B:
                name: R_R_GABA_B
                params:
                  synapse_model: GABA_B_syn
                  weights: 1.0
                  mask:
                    circular:
                      radius: 12.0
                  kernel:
                    gaussian:
                      p_center: 0.5
                      sigma: 7.5

          thalamo_cortical:
            params:
              synapse_model: AMPA_syn
              connection_type: convergent
              weights: 5.0
              delays:
                uniform:
                  min: 2.75
                  max: 3.25
            children:
              rectangular:
                params: {}
                children:
                  Tp_horizontal_to_L4:
                    name: Tp_horizontal_to_L4
                    params:
                        kernel: 0.5
                        mask:
                          rectangular:
                            lower_left: !!python/list [-4.0, -1]
                            upper_right: !!python/list [4.0, 1]
                  Tp_vertical_to_L4:
                    name: Tp_vertical_to_L4
                    params:
                        kernel: 0.5
                        mask:
                          rectangular:
                            lower_left: !!python/list [-1.0, -4.0]
                            upper_right: !!python/list [1.0, 4.0]
                  Tp_horizontal_to_L56:
                    name: Tp_horizontal_to_L56
                    params:
                        kernel: 0.3
                        mask:
                          rectangular:
                            lower_left: !!python/list [-4.0, -1]
                            upper_right: !!python/list [4.0, 1]
                  Tp_vertical_to_L56:
                    name: Tp_vertical_to_L56
                    params:
                        kernel: 0.3
                        mask:
                          rectangular:
                            lower_left: !!python/list [-1.0, -4.0]
                            upper_right: !!python/list [1.0, 4.0]
              Tp_Vp_diffuse:
                name: Tp_Vp_diffuse
                params:
                  mask:
                    circular:
                      radius: 5.0
                  kernel:
                    gaussian:
                      p_center: 0.1
                      sigma: 7.5

          cortico_thalamic:
            name: cortico_thalamic
            params:
              synapse_model: AMPA_syn
              weights: 1.0
              mask:
                circular:
                  radius: 5.0
              kernel:
                gaussian:
                  p_center: 0.5
                  sigma: 7.5
              delays:
                uniform:
                  min: 7.5
                  max: 8.5

          cortico_reticular:
            name: cortico_reticular
            params:
              synapse_model: AMPA_syn
              weights: 2.5
              mask:
                circular:
                  radius: 5.0
              kernel:
                gaussian:
                  p_center: 0.5
                  sigma: 7.5
              delays:
                uniform:
                  min: 7.5
                  max: 8.5

          retino_thalamic:
            name: retino_thalamic
            params:
              synapse_model: reticular_projection
              weights: 10.0
              mask:
                circular:
                  radius: 1.0
              kernel:
                gaussian:
                  p_center: 0.75
                  sigma: 2.5
              delays: 1.0


      connections:

        ########################################################################
        #################        Thalamic / reticular INTRA        #############
        ########################################################################

        ####################################
        ######## Retina to thalamus ########
        ####################################

        # Retina to Tp exc and Tp inh
        - source_layer: retina
          source_population: parrot_neuron
          target_layer: Tp_layer
          target_population: Tp_exc
          connection: retino_thalamic
          params: {}
          nest_params: {}
        - source_layer: retina
          source_population: parrot_neuron
          target_layer: Tp_layer
          target_population: Tp_inh
          connection: retino_thalamic
          params: {}
          nest_params: {}

        ####################################
        #### Intra thalamic/reticula #######
        ####################################

        ### Primary Intra-thalamic/reticula ###
        # Tp exc to Rp AMPA:
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Rp_layer
          target_population: Rp
          connection: T_R_AMPA
          params: {}
          nest_params: {}
        # Tp inh to Tp exc and Tp inh GABA_A
        - source_layer: Tp_layer
          source_population: Tp_inh
          target_layer: Tp_layer
          target_population: Tp_exc
          connection: T_T_GABA_A
          params: {}
          nest_params: {}
        - source_layer: Tp_layer
          source_population: Tp_inh
          target_layer: Tp_layer
          target_population: Tp_inh
          connection: T_T_GABA_A
          params: {}
          nest_params: {}
        # Rp to Tp exc and Tp inh GABA_A
        - source_layer: Rp_layer
          source_population: Rp
          target_layer: Tp_layer
          target_population: Tp_exc
          connection: R_T_GABA_A
          params: {}
          nest_params: {}
        - source_layer: Rp_layer
          source_population: Rp
          target_layer: Tp_layer
          target_population: Tp_inh
          connection: R_T_GABA_A
          params: {}
          nest_params: {}
        # Rp to Tp exc GABA_B
        - source_layer: Rp_layer
          source_population: Rp
          target_layer: Tp_layer
          target_population: Tp_exc
          connection: R_T_GABA_B
          params: {}
          nest_params: {}
        # Rp to Rp GABA_B
        - source_layer: Rp_layer
          source_population: Rp
          target_layer: Rp_layer
          target_population: Rp
          connection: R_R_GABA_B
          params: {}
          nest_params: {}

        ########################################################################
        #############     Thalamico-cortical and cortico-thalamic      #########
        ########################################################################

        ####################################
        ######### Thalamo-cortical #########
        ####################################

        ### Primary ( Tp to Vp ) ###
        # Rectangular to L4
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Vp_L4_vertical
          target_population: Vp_exc
          connection: Tp_vertical_to_L4
          params: {}
          nest_params: {}
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Vp_L4_horizontal
          target_population: Vp_exc
          connection: Tp_horizontal_to_L4
          params: {}
          nest_params: {}
        # Rectangular to L56
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Vp_L56_vertical
          target_population: Vp_exc
          connection: Tp_vertical_to_L56
          params: {}
          nest_params: {}
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Vp_L56_horizontal
          target_population: Vp_exc
          connection: Tp_horizontal_to_L56
          params: {}
          nest_params: {}
        # Diffuse to L4
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Vp_L4_vertical
          target_population: Vp_inh
          connection: Tp_Vp_diffuse
          params: {}
          nest_params: {}
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Vp_L4_horizontal
          target_population: Vp_inh
          connection: Tp_Vp_diffuse
          params: {}
          nest_params: {}
        # Diffuse to L56
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Vp_L56_vertical
          target_population: Vp_inh
          connection: Tp_Vp_diffuse
          params: {}
          nest_params: {}
        - source_layer: Tp_layer
          source_population: Tp_exc
          target_layer: Vp_L56_horizontal
          target_population: Vp_inh
          connection: Tp_Vp_diffuse
          params: {}
          nest_params: {}

        ####################################
        ######### Cortico-Thalamic #########
        ####################################

        ### Primary: Vp to Tp and Rp ###
        # Vp L56 all orientations to Tp exc
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Tp_layer
          target_population: Tp_exc
          connection: cortico_thalamic
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Tp_layer
          target_population: Tp_exc
          connection: cortico_thalamic
          params: {}
          nest_params: {}
        # Vp L56 all orientations to Tp inh
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Tp_layer
          target_population: Tp_inh
          connection: cortico_thalamic
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Tp_layer
          target_population: Tp_inh
          connection: cortico_thalamic
          params: {}
          nest_params: {}
        # cortico_reticular
        # Vp L56 all orientations to Rp
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Rp_layer
          target_population: Rp
          connection: cortico_reticular
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Rp_layer
          target_population: Rp
          connection: cortico_reticular
          params: {}
          nest_params: {}



        ########################################################################
        ##########################     Intra-areal       #######################
        ########################################################################


        ####################################
        ###### Intra-areal Primary #########
        ####################################

        ## intralaminar_AMPA. Horizontal and vertical (full selectivity)
        # vertical excitatory to vertical excitatory and vertical inhibitory
        - source_layer: Vp_L23_vertical
          source_population: Vp_exc
          target_layer: Vp_L23_vertical
          target_population: Vp_exc
          connection: intralaminar_AMPA
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_vertical
          source_population: Vp_exc
          target_layer: Vp_L23_vertical
          target_population: Vp_inh
          connection: intralaminar_AMPA
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_vertical
          source_population: Vp_exc
          target_layer: Vp_L4_vertical
          target_population: Vp_exc
          connection: intralaminar_AMPA_L4
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_vertical
          source_population: Vp_exc
          target_layer: Vp_L4_vertical
          target_population: Vp_inh
          connection: intralaminar_AMPA_L4
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Vp_L56_vertical
          target_population: Vp_exc
          connection: intralaminar_AMPA
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Vp_L56_vertical
          target_population: Vp_inh
          connection: intralaminar_AMPA
          params: {}
          nest_params: {}
        # horizontal exc to horizontal exc and horizontal inh
        - source_layer: Vp_L23_horizontal
          source_population: Vp_exc
          target_layer: Vp_L23_horizontal
          target_population: Vp_exc
          connection: intralaminar_AMPA
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_exc
          target_layer: Vp_L23_horizontal
          target_population: Vp_inh
          connection: intralaminar_AMPA
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_horizontal
          source_population: Vp_exc
          target_layer: Vp_L4_horizontal
          target_population: Vp_exc
          connection: intralaminar_AMPA_L4
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_horizontal
          source_population: Vp_exc
          target_layer: Vp_L4_horizontal
          target_population: Vp_inh
          connection: intralaminar_AMPA_L4
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Vp_L56_horizontal
          target_population: Vp_exc
          connection: intralaminar_AMPA
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Vp_L56_horizontal
          target_population: Vp_inh
          connection: intralaminar_AMPA
          params: {}
          nest_params: {}

        ## intralaminar_NMDA
        # L23 exc to L23 exc (hor and vertical, full selectivity)
        - source_layer: Vp_L23_horizontal
          source_population: Vp_exc
          target_layer: Vp_L23_horizontal
          target_population: Vp_exc
          connection: intralaminar_NMDA
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_vertical
          source_population: Vp_exc
          target_layer: Vp_L23_vertical
          target_population: Vp_exc
          connection: intralaminar_NMDA
          params: {}
          nest_params: {}

        ## interlaminar_AMPA
        # L23 exc to L56_exc and L56_inh (hor and vertical, full selectivity)
        - source_layer: Vp_L23_vertical
          source_population: Vp_exc
          target_layer: Vp_L56_vertical
          target_population: Vp_exc
          connection: interlaminar_AMPA_L23_to_L56
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_vertical
          source_population: Vp_exc
          target_layer: Vp_L56_vertical
          target_population: Vp_inh
          connection: interlaminar_AMPA_L23_to_L56
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_exc
          target_layer: Vp_L56_horizontal
          target_population: Vp_exc
          connection: interlaminar_AMPA_L23_to_L56
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_exc
          target_layer: Vp_L56_horizontal
          target_population: Vp_inh
          connection: interlaminar_AMPA_L23_to_L56
          params: {}
          nest_params: {}
        # L4 exc to L2_exc and L2_inh (hor and vertical, full selectivity)
        - source_layer: Vp_L4_vertical
          source_population: Vp_exc
          target_layer: Vp_L23_vertical
          target_population: Vp_exc
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_vertical
          source_population: Vp_exc
          target_layer: Vp_L23_vertical
          target_population: Vp_inh
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_horizontal
          source_population: Vp_exc
          target_layer: Vp_L23_horizontal
          target_population: Vp_exc
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_horizontal
          source_population: Vp_exc
          target_layer: Vp_L23_horizontal
          target_population: Vp_inh
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        # L56 exc to L23_exc and L23_inh (hor and vertical, full selectivity)
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Vp_L23_vertical
          target_population: Vp_exc
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Vp_L23_vertical
          target_population: Vp_inh
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Vp_L23_horizontal
          target_population: Vp_exc
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Vp_L23_horizontal
          target_population: Vp_inh
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        # L56 exc to L4_exc and L4_inh (hor and vertical, full selectivity)
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Vp_L4_vertical
          target_population: Vp_exc
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_vertical
          source_population: Vp_exc
          target_layer: Vp_L4_vertical
          target_population: Vp_inh
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Vp_L4_horizontal
          target_population: Vp_exc
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_exc
          target_layer: Vp_L4_horizontal
          target_population: Vp_inh
          connection: interlaminar_AMPA_Vp
          params: {}
          nest_params: {}

        ## Interlaminar NMDA
        # L23 exc to L56 exc, full selectivity
        - source_layer: Vp_L23_vertical
          source_population: Vp_exc
          target_layer: Vp_L56_vertical
          target_population: Vp_exc
          connection: interlaminar_NMDA
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_exc
          target_layer: Vp_L56_horizontal
          target_population: Vp_exc
          connection: interlaminar_NMDA
          params: {}
          nest_params: {}

        ## Intralaminar GABA_A
        # L23
        # L23 inh to L23 exc (partial selectivity)
        - source_layer: Vp_L23_vertical
          source_population: Vp_inh
          target_layer: Vp_L23_vertical
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_vertical
          source_population: Vp_inh
          target_layer: Vp_L23_horizontal
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_inh
          target_layer: Vp_L23_horizontal
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_inh
          target_layer: Vp_L23_vertical
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        # L23 inh to L23 inh (All orientations- same and crossed.)
        # Crossed have higher weight
        - source_layer: Vp_L23_vertical
          source_population: Vp_inh
          target_layer: Vp_L23_vertical
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cc
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_vertical
          source_population: Vp_inh
          target_layer: Vp_L23_horizontal
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cx
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_inh
          target_layer: Vp_L23_horizontal
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cc
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_inh
          target_layer: Vp_L23_vertical
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cx
          params: {}
          nest_params: {}
        # L4
        # L4 inh to L4 exc (no selectivity)
        - source_layer: Vp_L4_vertical
          source_population: Vp_inh
          target_layer: Vp_L4_vertical
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_vertical
          source_population: Vp_inh
          target_layer: Vp_L4_horizontal
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_horizontal
          source_population: Vp_inh
          target_layer: Vp_L4_horizontal
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_horizontal
          source_population: Vp_inh
          target_layer: Vp_L4_vertical
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        # L4 inh to L4 inh (no selectivity)
        # Crossed have higher weight
        - source_layer: Vp_L4_vertical
          source_population: Vp_inh
          target_layer: Vp_L4_vertical
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cc
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_vertical
          source_population: Vp_inh
          target_layer: Vp_L4_horizontal
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cx
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_horizontal
          source_population: Vp_inh
          target_layer: Vp_L4_horizontal
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cc
          params: {}
          nest_params: {}
        - source_layer: Vp_L4_horizontal
          source_population: Vp_inh
          target_layer: Vp_L4_vertical
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cx
          params: {}
          nest_params: {}
        # L56
        # L56 inh to L56 exc (no selectivity)
        - source_layer: Vp_L56_vertical
          source_population: Vp_inh
          target_layer: Vp_L56_vertical
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_vertical
          source_population: Vp_inh
          target_layer: Vp_L56_horizontal
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_inh
          target_layer: Vp_L56_horizontal
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_inh
          target_layer: Vp_L56_vertical
          target_population: Vp_exc
          connection: intralaminar_GABA_A_to_exc
          params: {}
          nest_params: {}
        # L56 inh to L56 inh (partial selectivity)
        # Crossed have higher weight
        - source_layer: Vp_L56_vertical
          source_population: Vp_inh
          target_layer: Vp_L56_vertical
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cc
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_vertical
          source_population: Vp_inh
          target_layer: Vp_L56_horizontal
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cx
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_inh
          target_layer: Vp_L56_horizontal
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cc
          params: {}
          nest_params: {}
        - source_layer: Vp_L56_horizontal
          source_population: Vp_inh
          target_layer: Vp_L56_vertical
          target_population: Vp_inh
          connection: intralaminar_GABA_A_to_inh_cx
          params: {}
          nest_params: {}

        ## Interlaminar GABA_B
        # From L23_inh to all layer exc, full selectivity
        - source_layer: Vp_L23_vertical
          source_population: Vp_inh
          target_layer: Vp_L23_vertical
          target_population: Vp_exc
          connection: interlaminar_GABA_B
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_inh
          target_layer: Vp_L23_horizontal
          target_population: Vp_exc
          connection: interlaminar_GABA_B
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_vertical
          source_population: Vp_inh
          target_layer: Vp_L4_vertical
          target_population: Vp_exc
          connection: interlaminar_GABA_B
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_inh
          target_layer: Vp_L4_horizontal
          target_population: Vp_exc
          connection: interlaminar_GABA_B
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_vertical
          source_population: Vp_inh
          target_layer: Vp_L56_vertical
          target_population: Vp_exc
          connection: interlaminar_GABA_B
          params: {}
          nest_params: {}
        - source_layer: Vp_L23_horizontal
          source_population: Vp_inh
          target_layer: Vp_L56_horizontal
          target_population: Vp_exc
          connection: interlaminar_GABA_B
          params: {}
          nest_params: {}
